PEP: 593
Title: Improving bugs.python.org
Author: Berker Peksag <berker.peksag@gmail.com>
        Ezio Melotti <ezio.melotti@gmail.com>
Discussions-To: https://discuss.python.org/c/core-workflow
Status: Draft
Type: Process
Content-Type: text/x-rst
Created: 12-May-2019


Abstract
========

This PEP addresses issues and factual errors found in :pep:`581` and
proposes a list of improvements to make bugs.python.org more
usable for contributors and core developers.


Motivation
==========

On May 14th, 2019 :pep:`581` has been accepted [#]_.  The PEP however
contains factual errors and doesn't addresses some of the issues
that the migration to GitHub Issues might present.


Rationale
=========

While it might be too late to change the decision on :pep:`581`,
this PEP will still present valuable information that can lead
to a better understanding of pros and cons of Roundup and GitHub
Issues and issues that needs to be considered during the migration.


PEP 581 issues
==============

This section addresses errors in :pep:`581`.

The "Why GitHub?" section of PEP 581 lists features currently
available on GitHub Issues but not on Roundup.  Some of this features
are currently supported:

* "Ability to reply to issue and pull request conversations via email."

  * Being able to reply by email has been one of the core features of
    Roundup since the beginning.  It is also possible to create new
    issues or close existing ones, set or modify fields, and add
    attachments.

* "Email notifications containing metadata, integrated with Gmail,
  allowing systematic filtering of emails."

  * Emails sent by Roundup contains metadata that can be used for
    filtering.

* "Additional privacy, such as offering the user a choice to hide an
  email address, while still allowing communication with the user
  through @-mentions."

  * Email addresses are hidden by default to users that are not
    registered.  Registered users can see other users' addresses
    because we configured the tracker to show them.  It can easily
    be changed if desired.  Users can still be added to the nosy
    list by using their username even if their address is hidden.

* "Ability to automatically close issues when a PR has been merged."

  * The GitHub integration of Roundup automatically closes issues
    when a commit that contains "fixes issue <id>" is merged.
    (Alternative spellings such as "closes" or "bug" are also supported.)
    See [#]_ for a recent example of this feature.

* "Support for permalinks, allowing easy quoting and copying &
  pasting of source code."

  * Roundup has permalinks for issues, messages, attachments, etc.
    In addition, Roundup allows to easily rewrite broken URLs in
    messages (e.g. if the code hosting changes).

* "Core developers, volunteers, and the PSF don't have to maintain the
  issue infrastructure/site, giving us more time and resources to focus
  on the development of Python."

  * While this is partially true, additional resources are required to
    write and maintain bots.

    In some cases, bots are required to workaround GitHub's lack of
    features rather than expanding. [#]_ was written
    specifically to workaround GitHub's email integration.

    Updating our bots to stay up-to-date with changes in the GitHub API
    has also maintenance cost. [#]_ took two days to be fixed.

The "Issues with Roundup / bpo" section of :pep:`581` lists some issues
that have already been fixed:

* "The upstream Roundup code is in Mercurial. Without any CI available,
  it puts heavy burden on the few existing maintainers in terms of
  reviewing, testing, and applying patches."

  * While Roundup uses Mercurial by default, there is a git clone
    available on GitHub [#]_.  Roundup also has CI available [#]_ [#]_.

* "There is no REST API available. There is an open issue in Roundup for
  adding REST API. Last activity was in 2016."

  * The REST API has been integrated and it's now available in Roundup.

* "Users email addresses are exposed. There is no option to mask it."

  * Exposing addresses to logged in users was a decision taken when our
    instance was set up.

    Anonymous users were only see the information listed below at [#]_::

        Username    GitHub      Real name           Organization Email address

        [hidden] *  gvanrossum  Guido van Rossum    [hidden]     [hidden]

    Email addresses now only shown to users with ``Developer`` role and
    the "Email address" column has now been removed.

* "It sends a number of unnecessary emails and notifications, and it is
  difficult, if not impossible, to configure."

  * This can be configured.

* "Creating an account has been a hassle. There have been reports of people
  having trouble creating accounts or logging in."

  * The main issue is confirmation emails being marked as spam.  Work has
    been done to resolve the issue.

  .. TODO: investigate the status of this; when was the last report?


Improving Roundup
=================

This section discusses how some of the issues mentioned by :pep:`581`
can be fixed by improving Roundup and/or our instance.

.. TODO: expand and integrate with the Roadmap section below


GitHub Issues missing features
==============================

This section discusses features available in Roundup that are
currently missing in GitHub Issues.

.. TODO: expand this section


Migration considerations
========================

This section describes issues with the migrations that might not
have been addressed by :pep:`581`.

.. TODO: review PEPs 581/588. Possible items: new-bugs-announce ML,
   weekly report, issue stats, etc.


Roadmap
=======

Features
--------

* **Mobile friendly theme:** Current theme of bugs.python.org looks
  dated and it doesn't work well with mobile browsers. We want to
  replace it with a more modern and mobile-friendly theme by keeping
  its main look same.

* **Support logging in with GitHub:** We've been getting reports from
  new contributors about missing confirmation emails.  New contributors
  might find using their GitHub account to register bugs.python.org
  easier than creating a new account from scratch.

* **Support Markdown in comments.**

* **Add PR link to BPO emails:** The patch at https://mail.python.org/pipermail/tracker-discuss/2018-June/004547.html
  changes the BPO mail from::

     components: +Tkinter
     versions: +Python 3.4
     pull_requests: +42

  to::

     components: +Tkinter
     versions: +Python 3.4
     pull_request: https://github.com/python/cpython/pull/341

* **Add 'remove me from nosy list' button:** The work on adding this
  feature has already been planned.

Bugs
----

.. Listing user emails https://bugs.python.org/issue32177


Infrastructure
--------------

* Our Roundup fork can easily be ditched. The biggest dependency is our
  REST API. See the GSoC project section for more details.

* Once we get rid of our Roundup fork, we can easily move source code for
  bugs.python.org instance to GitHub to attract more contributors.

* We already have a Docker image to install development environment at
  https://github.com/python/docker-bpo


GSoC project
------------

.. TODO

References
==========

.. [#] [Python-Dev] PEP 581 (Using GitHub issues for CPython) is accepted

   https://mail.python.org/pipermail/python-dev/2019-May/157399.html

.. [#] this commit

   https://github.com/python/cpython/commit/53d378c81286644138415cb56da52a7351e1a477

.. [#] The cpython-emailer-webhook project

   https://github.com/berkerpeksag/cpython-emailer-webhook

.. [#] A recent incident caused by GitHub

   https://github.com/python/bedevere/pull/163

.. [#] GitHub clone of Roundup

   https://github.com/roundup-tracker/roundup

.. [#] Travis-CI for Roundup

   https://travis-ci.org/roundup-tracker/roundup) and codecov

.. [#] Codecov for Roundup

   https://codecov.io/gh/roundup-tracker/roundup/commits

.. [#] the user listings page

   https://bugs.python.org/user?@sort=username

Copyright
=========

This document has been placed in the public domain.

..
   Local Variables:
   mode: indented-text
   indent-tabs-mode: nil
   sentence-end-double-space: t
   fill-column: 70
   coding: utf-8
   End:
